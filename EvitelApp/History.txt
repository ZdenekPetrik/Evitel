18.11.2022 - EvitelApp a EvitelLib. Net.Framework 4.8. Zatím to udìlám v èem umím a když bude èas pøepíšu do Core.
- EvitelLib  EF CodeFirst (EntityFramework 6.4.4 - asi poslední verze když nechceš Core. Staèí už má v sobì SQLServer)
- Adresáø Entity obsahuje DBModel.cs, LoginUser.cs, LoginAccess.cs, a vazební tabulku LoginAccesUser.cs 
- Vytvoøení databáze: musíš do app.config pøidat configuration string (s name "DBEvitel") na který se odvolává DBModel.cs
					  napíšeš 3 tøídy jako entity LoginUser.cs, LoginAccess.cs, a vazební tabulku LoginAccesUser.cs.
					  Enable-Migrations - tzn, že vytvoøí adresáø Migration a vùbec zjistí že to jde (knihovny, vazby).
					  Add-Migration InitialDBCreate -ProjectName EvitelLib -StartUpProjectName EvitelLib FirstMigration - pøidá migraci YYYMMDDHHmmSS_InitialDBCreate.cs
					  Do této migrace mùžeš napsat úvodní Seed. Já jsem si vytvoøil dva uživatele, práva. (blbost je to v Configuration.cs, tam by to asi být nemìlo)
					  update-database - vytvoøí databáze a tøi tabulky dle úvodní migrace. 

20.11.2022 - Pøedìlání prvotní Init DB. Systém Remos. 001.Seed.sql plní data. Potøebuji k tomu nahradit tøídu DbMigration DbZPTMigration.cs, aby to spustilo SQL. 
			 Odstranìní sloupce Discriminator, který si EF tvoøí automaticky, pokud tøídu, kterou máš registrovanou v DBContext použiješ jako rodièe pro jinou tøídu ( public class CLoggedUser : LoginUser). 
			  Abych to odstranil použil jsem modifikátor [NotMapped]. Ale je tøeba udìlat novou migraci 
			 .editorconfig

21.11.2022 - Založení Git. Dokonèení login pro jméno a jméno heslo.
22.11.2022 - Dokonèení Login pro 6 typù. Øešení pro Windows. Hledání øešení pro Komponentu DataGridViewExt
23.11.2022 - State a View wMainEventLog
24.11.2022 - Tak jsem celý den zkoušel View a byla to marná práce. View v DB-First s EF6 nefunguje (EF Core už má ToView(), ale tady je jen ToTable.) No ale mám obrazovku pro zobrazování MainEventLogu (Panel1/Panel2), ale nìjak se mi nezobrazují texty
25.11.2022 - Bylo to tím, že barva textu byla bílá a vzala si default z panelu, který jsem nastavil na bílo. Navíc DataGridView neumí List<string>. String bere jako tøídu a tak zobrazí všechny jeho property. A ta je jedna neboli Length. No nicménì - vše ohlednì EventLogu dodìláno Filtr propojen s vyhledávání repository sprý´ávnì filtruje ale neumít order. Protože orderuji podle názvu sloupce.
26.11.2022 - Testování. Vyzkoušel jsem MSTest,xUnitTest a UnitTest. Pouze UnitTest umí Net.Framework 4.8 u ostatních neotevøu DB.
27.11.2022 - EvitelLib2 s Core 5.0. Instalace 
			- <PackageReference Include="Microsoft.EntityFrameworkCore.Relational"  Version="5.0.17"
			- <PackageReference Include="Microsoft.EntityFrameworkCore.SqlServer" Version="5.0.17" />
			- <PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="5.0.17">
			- <PackageReference Include="System.Configuration.ConfigurationManager" Version="5.0.0" /> 
28.11.2022 - View do EF 5.0 Core. Musí se postupnì. First Init Bez View. Pak dodáš Entity, DbSet a mapování v 
2.12.2022 - Konzultace Simona
4.12.2022 - Jádro databáze pro LEKI hotovo. Scaffold databaze (pøechod na DB-First)
6.12.2022 - Obrazovka ucCallLEKI a zapracování do frmMain.
7.12.2022 - Import dat z excelu (via linkedserver + SQl Server a právy LokalSystem). Naplnìní èíselníkù. Doupøesnìní zadání se Simonou
8.12.2022 - Eager cteni - jde to, ale zùstanu u vlastních View. Je to dobré pro to že vidím z více zdrojù co jsem naèetl. Pro první verzi je to pro mne lepší.
9.12.2022 - VS pada, zkusim 2022 a Core 6.0
14.12.2022 - Editace èíselníku Interventi. Stále problém skoro se vším. Asi to ale není jednoduché protože profi øešení stojí 1000$
15.12.2012- Èíselníky bez editace s ADO.NET
16.12.2022- Vyplnìní LIKO hovoru. Validace
23.12.2022 - dokonèen zápis LIKO hovoru.
3.1.2023 - zobrazení LIKO hovoru ze všech 4 ctrl oken (Call,Incident, Intervence,Participant)
4.1.2023 - ctrlUser a interface IctrlWithDSG, které øeší obsluhu obecného DataGridView
5.1.2023 - export do Excelu. Hraní si s SQLite.
6.1.2023 - Update and Add LoginUser. Napojení na ctrlUser.
7.1.2023 - CallLiko - Update (read from DB and update all items + Participations). Zatím není propis do DB + zjištìní zmìn.
8.1.2023 - PDF - první pokus s formátováním (hlavièka) + Linq a contains
9.1.
10.01.2023 - rozjezd na Notebooku, Publish, SQL script celé databáze pro tvorbu
11.01.2023 - Simona 
 chybí opakovaná intervence (výbìr dle data a ID události)
 Pøedpokládané ID události (zobraz pøi Add)
 Nepoznám Nazapsaný, zapsaný, Edit staré
 Nový LIKO nesmaže Participanty
 Zpìt << <  id > >>
 Co Je to LIKO  Linka Krizové intervenèní pomoci (linka pomoci v krizi)
 Souhlas BKP - jako další položka v DB
 SSMS nejde edit tabulek?
 OK - Èas 0-12 a né 0-24
 OK - Celkem = 0 a už se dál nedostaneme
 FullExport datum od-do
 Statistika (od do) (osob, intervencí, událostí, všech/jen prvních) (týdenní, mìsíèní, ètvrtletní, pololetní, roèní), podle krajù, TÈ
 Na 21 se nejde pøihlásit. 
 Možná udìlat nìjakou úvodní obrazovku se statistikou.
 Mùžou být 2 interventi na jednoho Participanta
 Bylo by dobré exportovat jen vyfiltrovanou tabulku (nyní se ukládá celá table). A zároveò akceptovat øazení. Asi exportovat podle ID DGW.


 https://icons8.com/icons/set/back
 31.1.2022 - Simona + 1. Zatím testování protože nejde protokol ani editace LPvK
 08.02.2023 - Simona s Pavlem. Dáno do provozu
  USER - nesmí editovat èíselníky - jen prohlížet
  Poèítání èasu u tf. hovoru u LPvK
  Rychlý pøeskok mezi obìmi zadávacími okny SKI vers. LPvK
  ALIK - Naèti klienta z posledního hovoru
  U obìšeného neexistuje Intervet. TZN. Pokud nebude isIntervence, tak nevyžaduj interventa.
  Protokol Událostí Datum US.
  Protokol událostí - èíslo jednací.

19.02 - eGrouping, dimDateTime, + MainSettings (CisloJednaci,CisloJednaciIncrement)
20.02 - frmStatistika pro Calls a Events
22.02 - Pavel
1 - Chybí Alík, Rychlý pøeskok mezi okny, odèítání èasu, Editování èíselníkù.
2 - Èas se vyøeší tak, že po naètení stránky to zaène poèítat èas. Objeví se ikona hodin - bílá a po kliku na bílou ikonu se èas stopne. Pokud znovu klikne na šedou ikonu hodin tak se èas znovu zaène poèíta od dtStartTime.
3 - Participanti - pokud intervence = false tak se nevyžaduje Druh Intervence ani Intervent 1
4 - Øazení - od nejnovìjšího. Øazení zadej do DB aby se schovávalo a používalo i pøi dalšíém naètení.
5 - Intervent se zobrazuje v CMB boxu jako Pøíjmení Jméno - XXX a øadí se Kraj, Pøíjmení (u krajù zkusit editaci Order aby si mohli øíkat jak tøídit)
6 - Když smažu interventa furt se zobrazuje v Combo až do restartu app.
7 - Participanti - pamatuj si poslednì vybrané interventy a ty zobrazuj. Pokud žádnej není tak interventa z volání.
8 - Tlaèítko /SKI/LPvK
9 - Participant - umožní vìk 0 novorozenec, -1 neví se
10 - Editace poznámky rovnou po dobleclicku (asi nemusím dìlat, ale po zmìnì poznámky nebo èehokoliv n row bych mìl tu row obèerstvit)



25.02 1. Editování èíselníkù jen na právo PowerUser
      2. Rychlý pøeskok mezi okny SKY a LPvK
26.02 1. Automatické poèítání èasu hovoru. (èas se zapisuje do DB v sekundach pro LPVK a v minutach pro SKI)
      2. Nemám øešení pro Omyl - zatím nevyžaduji Vìk, Pohlaví a Typ služby a vymýšlím si hodnoty (kvùli vazebnímu klíèi) - aby se vùbec omyl zapsal.
      3. Vylepšení statistiky hovorù o možnost LoginUsers
      4. Tøídìní datum èas descending
      5. rozebìhnutí wLIKOParticipant - Úèastníci Intervence. Nefungoval.
      6. øazení u všech LIKO dle datumu sestupnì

28.2. - Návštìva øeditelství. Rozchození nové verze. DB ruènì protože na NTB mám verzi SQL serveru 15 a oni 16. Rošíøení o sloupeèek Zapsal (userName). Stále chybí ALIK


9.3. - Doma - rozšíøení ucParticipation o event DataChanged. Tím je možno enable buton "Uložit" i pøi zmìnì v úèastnícich.
              oprava editace svých vlastních nejde. Zmìna EndCallTime na StartCallTime  (v EndCallTime je pøeci null)
              Dodìlání Alíka-propisování z DB.
              Verze 2.2.0 zapsaná ruènì v Evitel2App.csproj + zobrazování v About, kde se zobrazuje datum vytvoøení souboru (last build)
10.3.         Oprava Volajiciho, nešel v rámci editace zmìnit.

17.3. Simona Doma. 
      - FANYNKA1 - pokud upraviš Tf hovor a následnì ti Fanynka1 zavolá, tak se údaje nepøepisují. 
      - Smazat záznam pro admina
      - Power User bude mít práva jak Archiv. Archiv nebude využit.
      - Button LPVK zmizí po Detail
      Button Duplikovat úèastníka
      - Rok mìsíc do všech reportù
      - Filtr a poèet vìt se nemìní.
      Vytvoø nový report s cca110 sloupci. 
      - Zjisti v Excelu jak vytvoøit tabulku pro výkonnost Volání, události, intervence, úèastníci
19.3. Pøepisování údajù Fanynka, Mazání záznamù zatím jen LPVK, Button LPVK už nemizí, Rok Mìsíc do všech reportù (snad). Excel vybojován
1.4.  Dokonèení statistika LPvK. Uložení filteru do souboru LPvkSetting.sesttings. Speciální SQL pro hledání v ContactTopic,CurrentStatus,EndOfSpeech
      Všechny Reporty mají mìsíc a rok. 
5.4 - U Simony v práci. Ètení hodnot z DB do GrifView pouze pokud nejsou null. Oprava vyplòování Nick - nikoliv podle indexu ale podle hodnoty iValue.
7.4. - Doma Doplnìní o protokol.pro (do user/petri/onedrive/document/). + Test na pøítomnost databáze pøi startu se zápisem chyby do protokolu
10.8.2023 - Simona v práci. View LPvK odstranìno TOP 1000.
	1 Zasekne se formuláø a nejde ostranit (na pozadí blikaj ale správné hodnoty - poèty vìt titulek)
	2 Èíselník poskoèí o 1000
	3 Pøehledy hovorù se nezobrazují všechny  konèí 19.7
	4 Z dílèích pøehledù se nedostanu do detailu hovoru.
	5 Statiska volání hlásí chybu - po odkliknutí OK. 
Nahrál jsem si zálohu dat. Tu jsem doma rozbalil do DB Evitel22. (do Evitel2 jsem to nedostal.)

27.8. 
	Opraveno 
ad 1.   Debug protokolace zmìn obrazovky. U Statistiky to nedìlalo Hide. commandFromTable je enum pøíkazù z jednotlivých tabulek (už né pøes int). Lepší názvy tabulek (dle menu).

Ad 2. SQL Zmeny 
ALTER DATABASE SCOPED CONFIGURATION SET IDENTITY_CACHE = OFF 
wLIKOParticipant - kvuli zmene wLIKOIntervence, + øazení
Protokol události MAINSetting:
CisloJednaci	è.j.: PPR-613 <ID>/ÈJ-2023-990762
CisloJednaciIncrement	1
Tabulky eGrouping, dimDateTime, + MainSettings (CisloJednaci,CisloJednaciIncrement)
10.8.20





